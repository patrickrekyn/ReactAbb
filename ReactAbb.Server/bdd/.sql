--------------------------------------------------------
--  Fichier créé - jeudi-février-06-2025   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence CREDITS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "C##NYAVO"."CREDITS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence USERS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "C##NYAVO"."USERS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 4 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence UTILISATEURS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "C##NYAVO"."UTILISATEURS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 6 NOCACHE  NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Table CREDITS
--------------------------------------------------------

  CREATE TABLE "C##NYAVO"."CREDITS" 
   (	"ID" NUMBER(*,0), 
	"NOM" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table OFFRE
--------------------------------------------------------

  CREATE TABLE "C##NYAVO"."OFFRE" 
   (	"ID" NUMBER(*,0), 
	"NOM" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PRODUIT
--------------------------------------------------------

  CREATE TABLE "C##NYAVO"."PRODUIT" 
   (	"ID" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOM" VARCHAR2(255 BYTE), 
	"PRIX" NUMBER(10,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table Produits
--------------------------------------------------------

  CREATE TABLE "C##NYAVO"."Produits" 
   (	"Id" NUMBER(10,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"Nom" NVARCHAR2(2000), 
	"Prix" NUMBER(18,2)
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TESTS
--------------------------------------------------------

  CREATE TABLE "C##NYAVO"."TESTS" 
   (	"Id" NUMBER(10,0) GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"Name" NVARCHAR2(2000)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USERS
--------------------------------------------------------

  CREATE TABLE "C##NYAVO"."USERS" 
   (	"ID" NUMBER(*,0), 
	"NOM" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table UTILISATEURS
--------------------------------------------------------

  CREATE TABLE "C##NYAVO"."UTILISATEURS" 
   (	"ID" NUMBER, 
	"EMAIL" NVARCHAR2(255), 
	"PASSWORD" NVARCHAR2(255)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into C##NYAVO.CREDITS
SET DEFINE OFF;
REM INSERTING into C##NYAVO.OFFRE
SET DEFINE OFF;
REM INSERTING into C##NYAVO.PRODUIT
SET DEFINE OFF;
Insert into C##NYAVO.PRODUIT (ID,NOM,PRIX) values ('1','Cache appareil photo','22000');
Insert into C##NYAVO.PRODUIT (ID,NOM,PRIX) values ('2','Ecran 22''''','255000');
REM INSERTING into C##NYAVO."Produits"
SET DEFINE OFF;
REM INSERTING into C##NYAVO.TESTS
SET DEFINE OFF;
Insert into C##NYAVO.TESTS ("Id","Name") values ('22','Test Entry 22/01/2025 13:23:21');
Insert into C##NYAVO.TESTS ("Id","Name") values ('7','John Doe');
Insert into C##NYAVO.TESTS ("Id","Name") values ('8','Jane Smith');
Insert into C##NYAVO.TESTS ("Id","Name") values ('24','Test Entry 22/01/2025 16:54:20');
Insert into C##NYAVO.TESTS ("Id","Name") values ('21','Test Entry 22/01/2025 13:19:50');
Insert into C##NYAVO.TESTS ("Id","Name") values ('23','Test Entry 22/01/2025 13:27:25');
Insert into C##NYAVO.TESTS ("Id","Name") values ('1','Test Entry 21/01/2025 16:46:00');
Insert into C##NYAVO.TESTS ("Id","Name") values ('41','Test Entry 24/01/2025 13:44:54');
REM INSERTING into C##NYAVO.USERS
SET DEFINE OFF;
Insert into C##NYAVO.USERS (ID,NOM) values ('1','Alice');
Insert into C##NYAVO.USERS (ID,NOM) values ('2','Bob');
Insert into C##NYAVO.USERS (ID,NOM) values ('3','Charlie');
REM INSERTING into C##NYAVO.UTILISATEURS
SET DEFINE OFF;
Insert into C##NYAVO.UTILISATEURS (ID,EMAIL,PASSWORD) values ('1','nyavo@gmail.com','qwert');
Insert into C##NYAVO.UTILISATEURS (ID,EMAIL,PASSWORD) values ('3','rakoto@gmail.com','$2a$11$e5e5rhliBqUofITcN0THLu/RHS0y41MP/KZUWksu0JAb/wN/KGiu2');
Insert into C##NYAVO.UTILISATEURS (ID,EMAIL,PASSWORD) values ('5','nyavotsitohaina@gmail.com','$2a$11$vAV02gFmGRAOfApreGXt9.gwivEhE1DlwLA2yk.93z5JvXQM38CIq');
Insert into C##NYAVO.UTILISATEURS (ID,EMAIL,PASSWORD) values ('2','nyavotsitohaina@outlook.com','qwerty');
Insert into C##NYAVO.UTILISATEURS (ID,EMAIL,PASSWORD) values ('4','123@gmail.com','$2a$11$MT8XgSS376sE/HlapylFHeAb2TAHzECpBgipzfkm5zcSr6hY.QyRO');
--------------------------------------------------------
--  DDL for Index PK_Produits
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##NYAVO"."PK_Produits" ON "C##NYAVO"."Produits" ("Id") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_TESTS
--------------------------------------------------------

  CREATE UNIQUE INDEX "C##NYAVO"."PK_TESTS" ON "C##NYAVO"."TESTS" ("Id") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger CREDITS_BI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##NYAVO"."CREDITS_BI" 
BEFORE INSERT ON Credits
FOR EACH ROW
BEGIN
    SELECT Credits_seq.NEXTVAL
    INTO :NEW.id
    FROM dual;
END


/
ALTER TRIGGER "C##NYAVO"."CREDITS_BI" ENABLE;
--------------------------------------------------------
--  DDL for Trigger USERS_BEFORE_INSERT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##NYAVO"."USERS_BEFORE_INSERT" 
BEFORE INSERT ON users
FOR EACH ROW
 WHEN (NEW.id IS NULL) BEGIN
    SELECT users_seq.NEXTVAL INTO :NEW.id FROM dual;
END;
/
ALTER TRIGGER "C##NYAVO"."USERS_BEFORE_INSERT" ENABLE;
--------------------------------------------------------
--  DDL for Trigger UTILISATEURS_BI
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "C##NYAVO"."UTILISATEURS_BI" 
BEFORE INSERT ON UTILISATEURS
FOR EACH ROW
BEGIN
  IF :NEW.ID IS NULL THEN
    SELECT UTILISATEURS_SEQ.NEXTVAL INTO :NEW.ID FROM DUAL;
  END IF;
END;
/
ALTER TRIGGER "C##NYAVO"."UTILISATEURS_BI" ENABLE;
--------------------------------------------------------
--  Constraints for Table TESTS
--------------------------------------------------------

  ALTER TABLE "C##NYAVO"."TESTS" MODIFY ("Id" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."TESTS" MODIFY ("Name" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."TESTS" ADD CONSTRAINT "PK_TESTS" PRIMARY KEY ("Id")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CREDITS
--------------------------------------------------------

  ALTER TABLE "C##NYAVO"."CREDITS" MODIFY ("NOM" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."CREDITS" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table UTILISATEURS
--------------------------------------------------------

  ALTER TABLE "C##NYAVO"."UTILISATEURS" MODIFY ("EMAIL" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."UTILISATEURS" MODIFY ("PASSWORD" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."UTILISATEURS" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table USERS
--------------------------------------------------------

  ALTER TABLE "C##NYAVO"."USERS" MODIFY ("NOM" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."USERS" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table PRODUIT
--------------------------------------------------------

  ALTER TABLE "C##NYAVO"."PRODUIT" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."PRODUIT" MODIFY ("NOM" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."PRODUIT" MODIFY ("PRIX" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."PRODUIT" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table OFFRE
--------------------------------------------------------

  ALTER TABLE "C##NYAVO"."OFFRE" MODIFY ("NOM" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."OFFRE" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table Produits
--------------------------------------------------------

  ALTER TABLE "C##NYAVO"."Produits" MODIFY ("Id" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."Produits" MODIFY ("Nom" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."Produits" MODIFY ("Prix" NOT NULL ENABLE);
  ALTER TABLE "C##NYAVO"."Produits" ADD CONSTRAINT "PK_Produits" PRIMARY KEY ("Id")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  TABLESPACE "USERS"  ENABLE;
